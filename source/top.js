"use strict";

var channelId;
var channelIconUrl;
var cookieKeyName = "srtjs-channel-icons-output";

$(function () {
  var firebaseConfig = {
    apiKey: "AIzaSyBV-Toqtl1kzXyY1roeQZoeLE3fBTg_3Yw",
    authDomain: "youtube-view-counter-b55c2.firebaseapp.com",
    databaseURL: "https://youtube-view-counter-b55c2.firebaseio.com",
    projectId: "youtube-view-counter-b55c2",
    storageBucket: "youtube-view-counter-b55c2.appspot.com",
    messagingSenderId: "375316669656"
  };
  firebase.initializeApp(firebaseConfig);

  var ref = firebase.database().ref("icons/1/html");
  ref.on("value", function (snapshot) {
    $("#output").html(snapshot.A.B);
  });

  // var htmlFromCookie = $.cookie(cookieKeyName);
  // $("#output").html(htmlFromCookie);

  var videoId = getVideoIdFromUrl();
  var channelIconUrl = searchChannelIconFromVideoId(videoId);

  searchRelatedVideoFromVideoId(videoId);

  console.log("channelIconUrl = " + channelIconUrl);
});

/**
 * 動画IDを返す
 */
function getVideoIdFromUrl() {
  var videoId = "jNQXAC9IVRw"; // YouTube最古の動画
  var urlQueries = getUrlVars(); // 注意： getUrlVars は subtitle.js のメソッド
  if (urlQueries["v"]) {
    videoId = urlQueries["v"];
  }

  return videoId;
}

/**
 * 動画IDを基にチャンネルアイコンのURLを返す
 */
function searchChannelIconFromVideoId(videoId) {
  var apiKey = "AIzaSyBV-Toqtl1kzXyY1roeQZoeLE3fBTg_3Yw";

  $.get("https://www.googleapis.com/youtube/v3/videos?part=snippet&id=" + videoId + "&key=" + apiKey, function (data) {
    channelId = data["items"][0]["snippet"]["channelId"];
    console.log("channelId = " + channelId);

    return searchChannelIconFromChannelId(channelId);
  });
}

/**
 * チャンネルIDを基にチャンネルアイコンのURLを返す
 */
function searchChannelIconFromChannelId(channelId) {
  var apiKey = "AIzaSyBV-Toqtl1kzXyY1roeQZoeLE3fBTg_3Yw";

  $.get("https://www.googleapis.com/youtube/v3/channels?part=snippet&id=" + channelId + "&key=" + apiKey, function (data) {
    channelIconUrl = data["items"][0]["snippet"]["thumbnails"]["default"]["url"];
    console.log("channelIconUrl = " + channelIconUrl);

    return channelIconUrl;
  });
}

/**
 * 関連動画を検索し、ランダムにひとつ動画IDを返す
 */
function searchRelatedVideoFromVideoId(videoId) {
  var apiKey = "AIzaSyBV-Toqtl1kzXyY1roeQZoeLE3fBTg_3Yw";

  $.get("https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&relatedToVideoId=" + videoId + "&key=" + apiKey, function (data) {
    $("#next-video").html("");

    var items = data["items"];
    for (var i = 0; i < items.length; ++i) {
      console.log(items[i]);
      var relatedVideoTitle = items[i]["snippet"]["title"];
      var relatedVideoId = items[i]["id"]["videoId"];

      $("#next-video").append('<row>\
          <div class="col-sm-12">\
            <a class="btn btn-primary" \
            href="http://localhost:8014/?surl=5seconds.srt&autoplay=1&v=' + relatedVideoId + '">' + relatedVideoTitle + '</a>\
          </div>\
        </row>');
    }
  });
}

function addIcon() {
  $("#output").append("<img src=\"" + channelIconUrl + "\">");

  $.cookie(cookieKeyName, $("#output").html(), { path: "/" });

  firebase.database().ref("icons/" + "1").set({
    html: $("#output").html()
  });
}

function gotoNextVideo(videoId) {
  location.href = "http://localhost:8014/?surl=5seconds.srt&autoplay=1&v=" + videoId;
}

/**
 * 出力エリアのすべてのアイコンとクッキーを削除
 */
function removeAllIcons() {
  if (confirm("本当に削除してよろしいですか？") === true) {
    $("#output").html("");
    deleteCookie();

    firebase.database().ref("icons/" + "1").remove();
  }
}

/**
 * クッキーの削除
 */
function deleteCookie() {
  $.removeCookie(cookieKeyName, { path: "/" });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRvcC5lczYiXSwibmFtZXMiOlsiY2hhbm5lbElkIiwiY2hhbm5lbEljb25VcmwiLCJjb29raWVLZXlOYW1lIiwiJCIsImZpcmViYXNlQ29uZmlnIiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwicHJvamVjdElkIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiZmlyZWJhc2UiLCJpbml0aWFsaXplQXBwIiwicmVmIiwiZGF0YWJhc2UiLCJvbiIsInNuYXBzaG90IiwiaHRtbCIsIkEiLCJCIiwidmlkZW9JZCIsImdldFZpZGVvSWRGcm9tVXJsIiwic2VhcmNoQ2hhbm5lbEljb25Gcm9tVmlkZW9JZCIsInNlYXJjaFJlbGF0ZWRWaWRlb0Zyb21WaWRlb0lkIiwiY29uc29sZSIsImxvZyIsInVybFF1ZXJpZXMiLCJnZXRVcmxWYXJzIiwiZ2V0IiwiZGF0YSIsInNlYXJjaENoYW5uZWxJY29uRnJvbUNoYW5uZWxJZCIsIml0ZW1zIiwiaSIsImxlbmd0aCIsInJlbGF0ZWRWaWRlb1RpdGxlIiwicmVsYXRlZFZpZGVvSWQiLCJhcHBlbmQiLCJhZGRJY29uIiwiY29va2llIiwicGF0aCIsInNldCIsImdvdG9OZXh0VmlkZW8iLCJsb2NhdGlvbiIsImhyZWYiLCJyZW1vdmVBbGxJY29ucyIsImNvbmZpcm0iLCJkZWxldGVDb29raWUiLCJyZW1vdmUiLCJyZW1vdmVDb29raWUiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsU0FBSjtBQUNBLElBQUlDLGNBQUo7QUFDQSxJQUFJQyxnQkFBZ0IsNEJBQXBCOztBQUVBQyxFQUFFLFlBQVc7QUFDWCxNQUFJQyxpQkFBaUI7QUFDbkJDLFlBQVEseUNBRFc7QUFFbkJDLGdCQUFZLDRDQUZPO0FBR25CQyxpQkFBYSxtREFITTtBQUluQkMsZUFBVyw0QkFKUTtBQUtuQkMsbUJBQWUsd0NBTEk7QUFNbkJDLHVCQUFtQjtBQU5BLEdBQXJCO0FBUUFDLFdBQVNDLGFBQVQsQ0FBdUJSLGNB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QUVBRSxJQUFFbUMsTUFBRixDQUFTcEMsYUFBVCxFQUF3QkMsRUFBRSxTQUFGLEVBQWFjLElBQWIsRUFBeEIsRUFBNkMsRUFBQ3NCLE1BQU0sR0FBUCxFQUE3Qzs7QUFFQTVCLFdBQVNHLFFBQVQsR0FBb0JELEdBQXBCLENBQXdCLFdBQVcsR0FBbkMsRUFBd0MyQixHQUF4QyxDQUE0QztBQUMxQ3ZCLFVBQU1kLEVBQUUsU0FBRixFQUFhYyxJQUFiO0FBRG9DLEdBQTVDO0FBR0Q7O0FBRUQsU0FBU3dCLGFBQVQsQ0FBdUJyQixPQUF2QixFQUFnQztBQUM5QnNCLFdBQVNDLElBQVQsR0FBZ0IsMkRBQTJEdkIsT0FBM0U7QUFDRDs7QUFFRDs7O0FBR0EsU0FBU3dCLGNBQVQsR0FBMEI7QUFDeEIsTUFBR0MsUUFBUSxpQkFBUixNQUErQixJQUFsQyxFQUF3QztBQUN0QzFDLE1BQUUsU0FBRixFQUFhYyxJQUFiLENBQWtCLEVBQWxCO0FBQ0E2Qjs7QUFFQW5DLGFBQVNHLFFBQVQsR0FBb0JELEdBQXBCLENBQXdCLFdBQVcsR0FBbkMsRUFBd0NrQyxNQUF4QztBQUNEO0FBQ0Y7O0FBRUQ7OztBQUdBLFNBQVNELFlBQVQsR0FBd0I7QUFDdEIzQyxJQUFFNkMsWUFBRixDQUFlOUMsYUFBZixFQUE4QixFQUFDcUMsTUFBTSxHQUFQLEVBQTlCO0FBQ0QiLCJmaWxlIjoidG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNoYW5uZWxJZDtcbnZhciBjaGFubmVsSWNvblVybDtcbnZhciBjb29raWVLZXlOYW1lID0gXCJzcnRqcy1jaGFubmVsLWljb25zLW91dHB1dFwiO1xuXG4kKGZ1bmN0aW9uKCkge1xuICB2YXIgZmlyZWJhc2VDb25maWcgPSB7XG4gICAgYXBpS2V5OiBcIkFJemFTeUJWLVRvcXRsMWt6WHlZMXJvZVFab2VMRTNmQlRnXzNZd1wiLFxuICAgIGF1dGhEb21haW46IFwieW91dHViZS12aWV3LWNvdW50ZXItYjU1YzIuZmlyZWJhc2VhcHAuY29tXCIsXG4gICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly95b3V0dWJlLXZpZXctY291bnRlci1iNTVjMi5maXJlYmFzZWlvLmNvbVwiLFxuICAgIHByb2plY3RJZDogXCJ5b3V0dWJlLXZpZXctY291bnRlci1iNTVjMlwiLFxuICAgIHN0b3JhZ2VCdWNrZXQ6IFwieW91dHViZS12aWV3LWNvdW50ZXItYjU1YzIuYXBwc3BvdC5jb21cIixcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogXCIzNzUzMTY2Njk2NTZcIlxuICB9O1xuICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcblxuICB2YXIgcmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoXCJpY29ucy8xL2h0bWxcIik7XG4gIHJlZi5vbihcInZhbHVlXCIsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG4gICAgJChcIiNvdXRwdXRcIikuaHRtbChzbmFwc2hvdC5BLkIpO1xuICB9KTtcblxuICAvLyB2YXIgaHRtbEZyb21Db29raWUgPSAkLmNvb2tpZShjb29raWVLZXlOYW1lKTtcbiAgLy8gJChcIiNvdXRwdXRcIikuaHRtbChodG1sRnJvbUNvb2tpZSk7XG5cbiAgdmFyIHZpZGVvSWQgPSBnZXRWaWRlb0lkRnJvbVVybCgpO1xuICB2YXIgY2hhbm5lbEljb25VcmwgPSBzZWFyY2hDaGFubmVsSWNvbkZyb21WaWRlb0lkKHZpZGVvSWQpO1xuXG4gIHNlYXJjaFJlbGF0ZWRWaWRlb0Zyb21WaWRlb0lkKHZpZGVvSWQpO1xuXG4gIGNvbnNvbGUubG9nKFwiY2hhbm5lbEljb25VcmwgPSBcIiArIGNoYW5uZWxJY29uVXJsKTtcbn0pO1xuXG4vKipcbiAqIOWLleeUu0lE44KS6L+U44GZXG4gKi9cbmZ1bmN0aW9uIGdldFZpZGVvSWRGcm9tVXJsKCkge1xuICB2YXIgdmlkZW9JZCA9IFwiak5RWEFDOUlWUndcIiAvLyBZb3VUdWJl5pyA5Y+k44Gu5YuV55S7XG4gIHZhciB1cmxRdWVyaWVzID0gZ2V0VXJsVmFycygpOyAvLyDms6jmhI/vvJogZ2V0VXJsVmFycyDjga8gc3VidGl0bGUuanMg44Gu44Oh44K944OD44OJXG4gIGlmICh1cmxRdWVyaWVzW1widlwiXSkge1xuICAgIHZpZGVvSWQgPSB1cmxRdWVyaWVzW1widlwiXTtcbiAgfVxuXG4gIHJldHVybiB2aWRlb0lkO1xufVxuXG4vKipcbiAqIOWLleeUu0lE44KS5Z+644Gr44OB44Oj44Oz44ON44Or44Ki44Kk44Kz44Oz44GuVVJM44KS6L+U44GZXG4gKi9cbmZ1bmN0aW9uIHNlYXJjaENoYW5uZWxJY29uRnJvbVZpZGVvSWQodmlkZW9JZCkge1xuICBjb25zdCBhcGlLZXkgPSBcIkFJemFTeUJWLVRvcXRsMWt6WHlZMXJvZVFab2VMRTNmQlRnXzNZd1wiO1xuXG4gICQuZ2V0KFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20veW91dHViZS92My92aWRlb3M/cGFydD1zbmlwcGV0JmlkPVwiICsgdmlkZW9JZCArIFwiJmtleT1cIiArIGFwaUtleSwgZnVuY3Rpb24oZGF0YSkge1xuICAgIGNoYW5uZWxJZCA9IGRhdGFbXCJpdGVtc1wiXVswXVtcInNuaXBwZXRcIl1bXCJjaGFubmVsSWRcIl07XG4gICAgY29uc29sZS5sb2coXCJjaGFubmVsSWQgPSBcIiArIGNoYW5uZWxJZCk7XG5cbiAgICByZXR1cm4gc2VhcmNoQ2hhbm5lbEljb25Gcm9tQ2hhbm5lbElkKGNoYW5uZWxJZCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIOODgeODo+ODs+ODjeODq0lE44KS5Z+644Gr44OB44Oj44Oz44ON44Or44Ki44Kk44Kz44Oz44GuVVJM44KS6L+U44GZXG4gKi9cbmZ1bmN0aW9uIHNlYXJjaENoYW5uZWxJY29uRnJvbUNoYW5uZWxJZChjaGFubmVsSWQpIHtcbiAgY29uc3QgYXBpS2V5ID0gXCJBSXphU3lCVi1Ub3F0bDFrelh5WTFyb2VRWm9lTEUzZkJUZ18zWXdcIjtcblxuICAkLmdldChcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvY2hhbm5lbHM/cGFydD1zbmlwcGV0JmlkPVwiICsgY2hhbm5lbElkICsgXCIma2V5PVwiICsgYXBpS2V5LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgY2hhbm5lbEljb25VcmwgPSBkYXRhW1wiaXRlbXNcIl1bMF1bXCJzbmlwcGV0XCJdW1widGh1bWJuYWlsc1wiXVtcImRlZmF1bHRcIl1bXCJ1cmxcIl07XG4gICAgY29uc29sZS5sb2coXCJjaGFubmVsSWNvblVybCA9IFwiICsgY2hhbm5lbEljb25VcmwpO1xuXG4gICAgcmV0dXJuIGNoYW5uZWxJY29uVXJsO1xuICB9KTtcbn1cblxuLyoqXG4gKiDplqLpgKPli5XnlLvjgpLmpJzntKLjgZfjgIHjg6njg7Pjg4Djg6DjgavjgbLjgajjgaTli5XnlLtJROOCkui/lOOBmVxuICovXG5mdW5jdGlvbiBzZWFyY2hSZWxhdGVkVmlkZW9Gcm9tVmlkZW9JZCh2aWRlb0lkKSB7XG4gIGNvbnN0IGFwaUtleSA9IFwiQUl6YVN5QlYtVG9xdGwxa3pYeVkxcm9lUVpvZUxFM2ZCVGdfM1l3XCI7XG5cbiAgJC5nZXQoXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3NlYXJjaD9wYXJ0PXNuaXBwZXQmdHlwZT12aWRlbyZyZWxhdGVkVG9WaWRlb0lkPVwiICsgdmlkZW9JZCArIFwiJmtleT1cIiArIGFwaUtleSwgZnVuY3Rpb24oZGF0YSkge1xuICAgICQoXCIjbmV4dC12aWRlb1wiKS5odG1sKFwiXCIpO1xuXG4gICAgdmFyIGl0ZW1zID0gZGF0YVtcIml0ZW1zXCJdO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7ICsraSkge1xuICAgICAgY29uc29sZS5sb2coaXRlbXNbaV0pO1xuICAgICAgdmFyIHJlbGF0ZWRWaWRlb1RpdGxlID0gaXRlbXNbaV1bXCJzbmlwcGV0XCJdW1widGl0bGVcIl07XG4gICAgICB2YXIgcmVsYXRlZFZpZGVvSWQgPSBpdGVtc1tpXVtcImlkXCJdW1widmlkZW9JZFwiXTtcblxuICAgICAgJChcIiNuZXh0LXZpZGVvXCIpLmFwcGVuZChcbiAgICAgICAgJzxyb3c+XFxcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTEyXCI+XFxcbiAgICAgICAgICAgIDxhIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgXFxcbiAgICAgICAgICAgIGhyZWY9XCJodHRwOi8vbG9jYWxob3N0OjgwMTQvP3N1cmw9NXNlY29uZHMuc3J0JmF1dG9wbGF5PTEmdj0nICsgcmVsYXRlZFZpZGVvSWQgKyAnXCI+JyArIHJlbGF0ZWRWaWRlb1RpdGxlICsgJzwvYT5cXFxuICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgIDwvcm93PidcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkSWNvbigpIHtcbiAgJChcIiNvdXRwdXRcIikuYXBwZW5kKFwiPGltZyBzcmM9XFxcIlwiICsgY2hhbm5lbEljb25VcmwgKyBcIlxcXCI+XCIpO1xuXG4gICQuY29va2llKGNvb2tpZUtleU5hbWUsICQoXCIjb3V0cHV0XCIpLmh0bWwoKSwge3BhdGg6IFwiL1wifSk7XG5cbiAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoXCJpY29ucy9cIiArIFwiMVwiKS5zZXQoe1xuICAgIGh0bWw6ICQoXCIjb3V0cHV0XCIpLmh0bWwoKVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ290b05leHRWaWRlbyh2aWRlb0lkKSB7XG4gIGxvY2F0aW9uLmhyZWYgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6ODAxNC8/c3VybD01c2Vjb25kcy5zcnQmYXV0b3BsYXk9MSZ2PVwiICsgdmlkZW9JZDtcbn1cblxuLyoqXG4gKiDlh7rlipvjgqjjg6rjgqLjga7jgZnjgbnjgabjga7jgqLjgqTjgrPjg7Pjgajjgq/jg4Pjgq3jg7zjgpLliYrpmaRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQWxsSWNvbnMoKSB7XG4gIGlmKGNvbmZpcm0oXCLmnKzlvZPjgavliYrpmaTjgZfjgabjgojjgo3jgZfjgYTjgafjgZnjgYvvvJ9cIikgPT09IHRydWUpIHtcbiAgICAkKFwiI291dHB1dFwiKS5odG1sKFwiXCIpO1xuICAgIGRlbGV0ZUNvb2tpZSgpO1xuXG4gICAgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoXCJpY29ucy9cIiArIFwiMVwiKS5yZW1vdmUoKTtcbiAgfVxufVxuXG4vKipcbiAqIOOCr+ODg+OCreODvOOBruWJiumZpFxuICovXG5mdW5jdGlvbiBkZWxldGVDb29raWUoKSB7XG4gICQucmVtb3ZlQ29va2llKGNvb2tpZUtleU5hbWUsIHtwYXRoOiBcIi9cIn0pO1xufVxuIl19
