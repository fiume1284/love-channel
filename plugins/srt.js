function loadScript(e,t){var a=document.createElement("script");a.type="text/javascript",a.src=e,a.onload=t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}function indexedFunction(e){return null===e?null:index in e?e[index]:null}function onYouTubeIframeAPIReady(){var e="wJddRdcr3BE",t=getUrlVars();t.v&&(e=t.v),t.autoplay&&(autoplay=t.autoplay),t.safer&&(safer=t.safer),t.surl&&(subUrl=t.surl),player=new YT.Player("player",{height:"390",width:"640",videoId:e,playerVars:{autoplay:autoplay},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function confirmExtSub(){return!0}function onPlayerReady(e){""===subUrl?getSub(e.target.getVideoUrl()):1==confirmExtSub()&&getSubFromUrl(subUrl,function(e){0==e&&disableDropper()})}function getSub(e){var t=new XMLHttpRequest,a=e.match(/\?v=([-\w]{11})/)[1];t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var e=t.responseXML.documentElement.getElementsByTagName("track");if(e.length){var n=document.createElement("div");n.style.cssText="padding:10px;background:white;border:1px solid #aaa;",n.onclick=function(){n.parentNode.removeChild(n)};for(var r=!0,o=0;o<e.length;o++){var i=document.createElement("button");i.type="button",i.innerHTML=e[o].getAttribute("lang_original"),i.style.cssText="margin:3px;",i.value=e[o].getAttribute("lang_code"),i.dataset.nm=e[o].getAttribute("name"),n.appendChild(i),1==r&&(r=!1,function(e){function n(e){var t=String(Math.floor(e/36e5)+100).substring(1),a=String(Math.floor((e-36e5*t)/6e4)+100).substring(1);return t+":"+a+":"+String(Math.floor((e-36e5*t-6e4*a)/1e3)+100).substring(1)+"."+String(e+1e3).slice(-3)}t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){for(var e="",a=t.responseXML.documentElement.getElementsByTagName("p"),r=0;r<a.length;r++)e+=r+1+"\n",e+=n(Number(a[r].getAttribute("t")))+" --\x3e "+n(Number(a[r].getAttribute("t"))+Number(a[r].getAttribute("d")))+"\n",e+=a[r].innerHTML+"\n\n";parseSrt(e),disableDropper()}},t.open("GET","https://www.youtube.com/api/timedtext?fmt=srv3&lang="+e.value+"&name="+e.dataset.nm+"&v="+a),t.send(null)}(i))}}else hasSubtitle}},t.open("GET","https://www.youtube.com/api/timedtext?type=list&v="+a),t.send(null)}function disableDropper(){document.getElementById("drop_zone_sub").style.display="none"}function onPlayerStateChange(e){e.data!=YT.PlayerState.PLAYING||done||(timer=setInterval("checkRate()",INTERVAL),done=!0)}function handleDragOver(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}function handleFileSelectSub(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer.files[0],a=new FileReader;a.readAsText(t,"utf-8"),a.onload=function(e){parseSrt(e.target.result),disableDropper()},a.onerror=function(e){alert("Error ï¼š"+e.target.error.code)}}function checkRate(){if(1==player.getPlayerState()){var e=player.getCurrentTime(),t=isInWhichSub(e,0);state!=t&&(state=t,index=String(state),-1!=state&&action(state))}}function action(state){index in doOnce||eval(subList[state])}var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var index="-1",vars={},doOnce={},dulation,INTERVAL=50,player,autoplay=0,subUrl="",safer="false",dropZoneSub=document.getElementById("drop_zone_sub");dropZoneSub.addEventListener("dragover",handleDragOver,!1),dropZoneSub.addEventListener("drop",handleFileSelectSub,!1);var done=!1,timer,state=-1;